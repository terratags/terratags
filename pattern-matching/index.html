<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A tool for validating tags on AWS, Azure, and Google Cloud resources in Terraform configurations"><link href=https://terratags.github.io/terratags/pattern-matching/ rel=canonical><link href=../remote-config/ rel=prev><link href=../example-standards/ rel=next><link rel=icon href=../assets/terratags-logo.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.22"><title>Pattern Matching - Terratags</title><link rel=stylesheet href=../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#pattern-matching-guide class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=Terratags class="md-header__button md-logo" aria-label=Terratags data-md-component=logo> <img src=../assets/terratags-logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Terratags </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Pattern Matching </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/terratags/terratags title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> terratags/terratags </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=Terratags class="md-nav__button md-logo" aria-label=Terratags data-md-component=logo> <img src=../assets/terratags-logo.svg alt=logo> </a> Terratags </label> <div class=md-nav__source> <a href=https://github.com/terratags/terratags title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> terratags/terratags </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Configuration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../configuration/ class=md-nav__link> <span class=md-ellipsis> Required Tags </span> </a> </li> <li class=md-nav__item> <a href=../remote-config/ class=md-nav__link> <span class=md-ellipsis> Remote Config Files </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Pattern Matching </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Pattern Matching </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#basic-concepts class=md-nav__link> <span class=md-ellipsis> Basic Concepts </span> </a> <nav class=md-nav aria-label="Basic Concepts"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-is-pattern-matching class=md-nav__link> <span class=md-ellipsis> What is Pattern Matching? </span> </a> </li> <li class=md-nav__item> <a href=#when-to-use-pattern-matching class=md-nav__link> <span class=md-ellipsis> When to Use Pattern Matching </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration-formats class=md-nav__link> <span class=md-ellipsis> Configuration Formats </span> </a> <nav class=md-nav aria-label="Configuration Formats"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#simple-format-no-patterns class=md-nav__link> <span class=md-ellipsis> Simple Format (No Patterns) </span> </a> </li> <li class=md-nav__item> <a href=#pattern-format class=md-nav__link> <span class=md-ellipsis> Pattern Format </span> </a> </li> <li class=md-nav__item> <a href=#mixed-format class=md-nav__link> <span class=md-ellipsis> Mixed Format </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#common-patterns-library class=md-nav__link> <span class=md-ellipsis> Common Patterns Library </span> </a> <nav class=md-nav aria-label="Common Patterns Library"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#environment-tags class=md-nav__link> <span class=md-ellipsis> Environment Tags </span> </a> </li> <li class=md-nav__item> <a href=#email-addresses class=md-nav__link> <span class=md-ellipsis> Email Addresses </span> </a> </li> <li class=md-nav__item> <a href=#project-codes class=md-nav__link> <span class=md-ellipsis> Project Codes </span> </a> </li> <li class=md-nav__item> <a href=#cost-centers class=md-nav__link> <span class=md-ellipsis> Cost Centers </span> </a> </li> <li class=md-nav__item> <a href=#resource-names class=md-nav__link> <span class=md-ellipsis> Resource Names </span> </a> </li> <li class=md-nav__item> <a href=#version-numbers class=md-nav__link> <span class=md-ellipsis> Version Numbers </span> </a> </li> <li class=md-nav__item> <a href=#ip-addresses class=md-nav__link> <span class=md-ellipsis> IP Addresses </span> </a> </li> <li class=md-nav__item> <a href=#aws-resource-arns class=md-nav__link> <span class=md-ellipsis> AWS Resource ARNs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#advanced-pattern-techniques class=md-nav__link> <span class=md-ellipsis> Advanced Pattern Techniques </span> </a> <nav class=md-nav aria-label="Advanced Pattern Techniques"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#case-insensitive-matching class=md-nav__link> <span class=md-ellipsis> Case-Insensitive Matching </span> </a> </li> <li class=md-nav__item> <a href=#optional-components class=md-nav__link> <span class=md-ellipsis> Optional Components </span> </a> </li> <li class=md-nav__item> <a href=#character-classes class=md-nav__link> <span class=md-ellipsis> Character Classes </span> </a> </li> <li class=md-nav__item> <a href=#alternation class=md-nav__link> <span class=md-ellipsis> Alternation </span> </a> </li> <li class=md-nav__item> <a href=#quantifiers class=md-nav__link> <span class=md-ellipsis> Quantifiers </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#error-handling-and-debugging class=md-nav__link> <span class=md-ellipsis> Error Handling and Debugging </span> </a> <nav class=md-nav aria-label="Error Handling and Debugging"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#understanding-error-messages class=md-nav__link> <span class=md-ellipsis> Understanding Error Messages </span> </a> </li> <li class=md-nav__item> <a href=#common-pattern-errors class=md-nav__link> <span class=md-ellipsis> Common Pattern Errors </span> </a> </li> <li class=md-nav__item> <a href=#testing-patterns class=md-nav__link> <span class=md-ellipsis> Testing Patterns </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> <nav class=md-nav aria-label="Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-start-simple class=md-nav__link> <span class=md-ellipsis> 1. Start Simple </span> </a> </li> <li class=md-nav__item> <a href=#2-use-meaningful-patterns class=md-nav__link> <span class=md-ellipsis> 2. Use Meaningful Patterns </span> </a> </li> <li class=md-nav__item> <a href=#3-document-your-patterns class=md-nav__link> <span class=md-ellipsis> 3. Document Your Patterns </span> </a> </li> <li class=md-nav__item> <a href=#4-test-thoroughly class=md-nav__link> <span class=md-ellipsis> 4. Test Thoroughly </span> </a> </li> <li class=md-nav__item> <a href=#5-consider-migration class=md-nav__link> <span class=md-ellipsis> 5. Consider Migration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#performance-considerations class=md-nav__link> <span class=md-ellipsis> Performance Considerations </span> </a> <nav class=md-nav aria-label="Performance Considerations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pattern-complexity-impact class=md-nav__link> <span class=md-ellipsis> Pattern Complexity Impact </span> </a> </li> <li class=md-nav__item> <a href=#best-practices-for-performance class=md-nav__link> <span class=md-ellipsis> Best Practices for Performance </span> </a> </li> <li class=md-nav__item> <a href=#optimization-tips class=md-nav__link> <span class=md-ellipsis> Optimization Tips </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#integration-examples class=md-nav__link> <span class=md-ellipsis> Integration Examples </span> </a> <nav class=md-nav aria-label="Integration Examples"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cicd-pipeline class=md-nav__link> <span class=md-ellipsis> CI/CD Pipeline </span> </a> </li> <li class=md-nav__item> <a href=#pre-commit-hook class=md-nav__link> <span class=md-ellipsis> Pre-commit Hook </span> </a> </li> <li class=md-nav__item> <a href=#terraform-plan-integration class=md-nav__link> <span class=md-ellipsis> Terraform Plan Integration </span> </a> </li> <li class=md-nav__item> <a href=#gitlab-ci-integration class=md-nav__link> <span class=md-ellipsis> GitLab CI Integration </span> </a> </li> <li class=md-nav__item> <a href=#jenkins-pipeline-integration class=md-nav__link> <span class=md-ellipsis> Jenkins Pipeline Integration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> <nav class=md-nav aria-label=Troubleshooting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pattern-not-matching class=md-nav__link> <span class=md-ellipsis> Pattern Not Matching </span> </a> </li> <li class=md-nav__item> <a href=#performance-considerations_1 class=md-nav__link> <span class=md-ellipsis> Performance Considerations </span> </a> </li> <li class=md-nav__item> <a href=#common-regex-gotchas class=md-nav__link> <span class=md-ellipsis> Common Regex Gotchas </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#reference class=md-nav__link> <span class=md-ellipsis> Reference </span> </a> <nav class=md-nav aria-label=Reference> <ul class=md-nav__list> <li class=md-nav__item> <a href=#regex-quick-reference class=md-nav__link> <span class=md-ellipsis> Regex Quick Reference </span> </a> </li> <li class=md-nav__item> <a href=#go-regex-documentation class=md-nav__link> <span class=md-ellipsis> Go Regex Documentation </span> </a> </li> <li class=md-nav__item> <a href=#testing-tools class=md-nav__link> <span class=md-ellipsis> Testing Tools </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../example-standards/ class=md-nav__link> <span class=md-ellipsis> Example Standards </span> </a> </li> <li class=md-nav__item> <a href=../exemptions/ class=md-nav__link> <span class=md-ellipsis> Exemptions </span> </a> </li> <li class=md-nav__item> <a href=../default-tags/ class=md-nav__link> <span class=md-ellipsis> Default Tags </span> </a> </li> <li class=md-nav__item> <a href=../logging/ class=md-nav__link> <span class=md-ellipsis> Logging </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../usage/ class=md-nav__link> <span class=md-ellipsis> Usage </span> </a> </li> <li class=md-nav__item> <a href=../module-validation/ class=md-nav__link> <span class=md-ellipsis> Module Validation </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Integration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../pre-commit/ class=md-nav__link> <span class=md-ellipsis> Pre-commit Hooks </span> </a> </li> <li class=md-nav__item> <a href=../ci-cd/ class=md-nav__link> <span class=md-ellipsis> CI/CD Integration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Examples </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../examples/ class=md-nav__link> <span class=md-ellipsis> Example references </span> </a> </li> <li class=md-nav__item> <a href=../sample-reports/ class=md-nav__link> <span class=md-ellipsis> Sample Reports </span> </a> </li> <li class=md-nav__item> <a href=../user-scenarios/ class=md-nav__link> <span class=md-ellipsis> User Scenarios </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Provider Support </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Provider Support </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../awscc_support/ class=md-nav__link> <span class=md-ellipsis> AWSCC Support </span> </a> </li> <li class=md-nav__item> <a href=../azure-support/ class=md-nav__link> <span class=md-ellipsis> Azure Support </span> </a> </li> <li class=md-nav__item> <a href=../google-support/ class=md-nav__link> <span class=md-ellipsis> Google Cloud Support </span> </a> </li> <li class=md-nav__item> <a href=../providers/ class=md-nav__link> <span class=md-ellipsis> Supported Providers </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Development </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#basic-concepts class=md-nav__link> <span class=md-ellipsis> Basic Concepts </span> </a> <nav class=md-nav aria-label="Basic Concepts"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-is-pattern-matching class=md-nav__link> <span class=md-ellipsis> What is Pattern Matching? </span> </a> </li> <li class=md-nav__item> <a href=#when-to-use-pattern-matching class=md-nav__link> <span class=md-ellipsis> When to Use Pattern Matching </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration-formats class=md-nav__link> <span class=md-ellipsis> Configuration Formats </span> </a> <nav class=md-nav aria-label="Configuration Formats"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#simple-format-no-patterns class=md-nav__link> <span class=md-ellipsis> Simple Format (No Patterns) </span> </a> </li> <li class=md-nav__item> <a href=#pattern-format class=md-nav__link> <span class=md-ellipsis> Pattern Format </span> </a> </li> <li class=md-nav__item> <a href=#mixed-format class=md-nav__link> <span class=md-ellipsis> Mixed Format </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#common-patterns-library class=md-nav__link> <span class=md-ellipsis> Common Patterns Library </span> </a> <nav class=md-nav aria-label="Common Patterns Library"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#environment-tags class=md-nav__link> <span class=md-ellipsis> Environment Tags </span> </a> </li> <li class=md-nav__item> <a href=#email-addresses class=md-nav__link> <span class=md-ellipsis> Email Addresses </span> </a> </li> <li class=md-nav__item> <a href=#project-codes class=md-nav__link> <span class=md-ellipsis> Project Codes </span> </a> </li> <li class=md-nav__item> <a href=#cost-centers class=md-nav__link> <span class=md-ellipsis> Cost Centers </span> </a> </li> <li class=md-nav__item> <a href=#resource-names class=md-nav__link> <span class=md-ellipsis> Resource Names </span> </a> </li> <li class=md-nav__item> <a href=#version-numbers class=md-nav__link> <span class=md-ellipsis> Version Numbers </span> </a> </li> <li class=md-nav__item> <a href=#ip-addresses class=md-nav__link> <span class=md-ellipsis> IP Addresses </span> </a> </li> <li class=md-nav__item> <a href=#aws-resource-arns class=md-nav__link> <span class=md-ellipsis> AWS Resource ARNs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#advanced-pattern-techniques class=md-nav__link> <span class=md-ellipsis> Advanced Pattern Techniques </span> </a> <nav class=md-nav aria-label="Advanced Pattern Techniques"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#case-insensitive-matching class=md-nav__link> <span class=md-ellipsis> Case-Insensitive Matching </span> </a> </li> <li class=md-nav__item> <a href=#optional-components class=md-nav__link> <span class=md-ellipsis> Optional Components </span> </a> </li> <li class=md-nav__item> <a href=#character-classes class=md-nav__link> <span class=md-ellipsis> Character Classes </span> </a> </li> <li class=md-nav__item> <a href=#alternation class=md-nav__link> <span class=md-ellipsis> Alternation </span> </a> </li> <li class=md-nav__item> <a href=#quantifiers class=md-nav__link> <span class=md-ellipsis> Quantifiers </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#error-handling-and-debugging class=md-nav__link> <span class=md-ellipsis> Error Handling and Debugging </span> </a> <nav class=md-nav aria-label="Error Handling and Debugging"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#understanding-error-messages class=md-nav__link> <span class=md-ellipsis> Understanding Error Messages </span> </a> </li> <li class=md-nav__item> <a href=#common-pattern-errors class=md-nav__link> <span class=md-ellipsis> Common Pattern Errors </span> </a> </li> <li class=md-nav__item> <a href=#testing-patterns class=md-nav__link> <span class=md-ellipsis> Testing Patterns </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> <nav class=md-nav aria-label="Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-start-simple class=md-nav__link> <span class=md-ellipsis> 1. Start Simple </span> </a> </li> <li class=md-nav__item> <a href=#2-use-meaningful-patterns class=md-nav__link> <span class=md-ellipsis> 2. Use Meaningful Patterns </span> </a> </li> <li class=md-nav__item> <a href=#3-document-your-patterns class=md-nav__link> <span class=md-ellipsis> 3. Document Your Patterns </span> </a> </li> <li class=md-nav__item> <a href=#4-test-thoroughly class=md-nav__link> <span class=md-ellipsis> 4. Test Thoroughly </span> </a> </li> <li class=md-nav__item> <a href=#5-consider-migration class=md-nav__link> <span class=md-ellipsis> 5. Consider Migration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#performance-considerations class=md-nav__link> <span class=md-ellipsis> Performance Considerations </span> </a> <nav class=md-nav aria-label="Performance Considerations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pattern-complexity-impact class=md-nav__link> <span class=md-ellipsis> Pattern Complexity Impact </span> </a> </li> <li class=md-nav__item> <a href=#best-practices-for-performance class=md-nav__link> <span class=md-ellipsis> Best Practices for Performance </span> </a> </li> <li class=md-nav__item> <a href=#optimization-tips class=md-nav__link> <span class=md-ellipsis> Optimization Tips </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#integration-examples class=md-nav__link> <span class=md-ellipsis> Integration Examples </span> </a> <nav class=md-nav aria-label="Integration Examples"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cicd-pipeline class=md-nav__link> <span class=md-ellipsis> CI/CD Pipeline </span> </a> </li> <li class=md-nav__item> <a href=#pre-commit-hook class=md-nav__link> <span class=md-ellipsis> Pre-commit Hook </span> </a> </li> <li class=md-nav__item> <a href=#terraform-plan-integration class=md-nav__link> <span class=md-ellipsis> Terraform Plan Integration </span> </a> </li> <li class=md-nav__item> <a href=#gitlab-ci-integration class=md-nav__link> <span class=md-ellipsis> GitLab CI Integration </span> </a> </li> <li class=md-nav__item> <a href=#jenkins-pipeline-integration class=md-nav__link> <span class=md-ellipsis> Jenkins Pipeline Integration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> <nav class=md-nav aria-label=Troubleshooting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pattern-not-matching class=md-nav__link> <span class=md-ellipsis> Pattern Not Matching </span> </a> </li> <li class=md-nav__item> <a href=#performance-considerations_1 class=md-nav__link> <span class=md-ellipsis> Performance Considerations </span> </a> </li> <li class=md-nav__item> <a href=#common-regex-gotchas class=md-nav__link> <span class=md-ellipsis> Common Regex Gotchas </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#reference class=md-nav__link> <span class=md-ellipsis> Reference </span> </a> <nav class=md-nav aria-label=Reference> <ul class=md-nav__list> <li class=md-nav__item> <a href=#regex-quick-reference class=md-nav__link> <span class=md-ellipsis> Regex Quick Reference </span> </a> </li> <li class=md-nav__item> <a href=#go-regex-documentation class=md-nav__link> <span class=md-ellipsis> Go Regex Documentation </span> </a> </li> <li class=md-nav__item> <a href=#testing-tools class=md-nav__link> <span class=md-ellipsis> Testing Tools </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=pattern-matching-guide>Pattern Matching Guide</h1> <p>This guide provides comprehensive information about using pattern matching in Terratags to validate tag values with regular expressions.</p> <h2 id=overview>Overview</h2> <p>Pattern matching allows you to enforce specific formats, naming conventions, and business rules for your tag values using regular expressions. This goes beyond simple presence validation to ensure tag values meet your organization's standards.</p> <h2 id=basic-concepts>Basic Concepts</h2> <h3 id=what-is-pattern-matching>What is Pattern Matching?</h3> <p>Pattern matching uses regular expressions (regex) to validate that tag values conform to specific formats. For example:</p> <ul> <li>Ensure environment tags only contain approved values (<code>dev</code>, <code>test</code>, <code>prod</code>)</li> <li>Validate email addresses for ownership tags</li> <li>Enforce project code formats (<code>ABC-123</code>)</li> <li>Prevent whitespace in resource names</li> </ul> <h3 id=when-to-use-pattern-matching>When to Use Pattern Matching</h3> <p>Use pattern matching when you need to:</p> <ul> <li><strong>Standardize Values</strong>: Ensure consistent naming across resources</li> <li><strong>Enforce Business Rules</strong>: Implement organizational policies</li> <li><strong>Prevent Errors</strong>: Catch common mistakes early</li> <li><strong>Improve Compliance</strong>: Meet regulatory or audit requirements</li> <li><strong>Maintain Quality</strong>: Ensure clean, consistent infrastructure</li> </ul> <h2 id=configuration-formats>Configuration Formats</h2> <h3 id=simple-format-no-patterns>Simple Format (No Patterns)</h3> <p>Basic presence validation without value checking:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nt>required_tags</span><span class=p>:</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Name</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Environment</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Owner</span>
</code></pre></div> <h3 id=pattern-format>Pattern Format</h3> <p>Advanced validation with regex patterns:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=nt>required_tags</span><span class=p>:</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>  </span><span class=nt>Name</span><span class=p>:</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>    </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^[a-zA-Z0-9-]+$&quot;</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>  </span><span class=nt>Environment</span><span class=p>:</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>    </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^(dev|test|staging|prod)$&quot;</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>  </span><span class=nt>Owner</span><span class=p>:</span>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>    </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$&quot;</span>
</code></pre></div> <h3 id=mixed-format>Mixed Format</h3> <p>Combine both approaches:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nt>required_tags</span><span class=p>:</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>  </span><span class=c1># Pattern validation</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>  </span><span class=nt>Environment</span><span class=p>:</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>    </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^(dev|test|staging|prod)$&quot;</span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>  </span><span class=c1># Simple validation</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>  </span><span class=nt>Team</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=w>  </span><span class=nt>Description</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span>
</code></pre></div> <h2 id=common-patterns-library>Common Patterns Library</h2> <h3 id=environment-tags>Environment Tags</h3> <p>Restrict to approved environment names:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=nt>Environment</span><span class=p>:</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^(dev|test|staging|prod)$&quot;</span>
</code></pre></div> <p><strong>Examples:</strong> - ✅ Matches: <code>dev</code>, <code>test</code>, <code>staging</code>, <code>prod</code> - ❌ Rejects: <code>development</code>, <code>production</code>, <code>DEV</code>, <code>Test</code></p> <h3 id=email-addresses>Email Addresses</h3> <p>Validate email format for ownership:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nt>Owner</span><span class=p>:</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$&quot;</span>
</code></pre></div> <p><strong>Examples:</strong> - ✅ Matches: <code>devops@company.com</code>, <code>team.lead@company.com</code> - ❌ Rejects: <code>username</code>, <code>user@domain</code>, <code>@company.com</code></p> <h3 id=project-codes>Project Codes</h3> <p>Enforce structured project identifiers:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nt>Project</span><span class=p>:</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^[A-Z]{2,4}-[0-9]{3,6}$&quot;</span>
</code></pre></div> <p><strong>Examples:</strong> - ✅ Matches: <code>WEB-123456</code>, <code>DATA-567890</code>, <code>INFRA-890123</code> - ❌ Rejects: <code>web-123</code>, <code>PROJECT</code>, <code>ABC-12</code></p> <h3 id=cost-centers>Cost Centers</h3> <p>Standardize cost center format:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=nt>CostCenter</span><span class=p>:</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^CC-[0-9]{4}$&quot;</span>
</code></pre></div> <p><strong>Examples:</strong> - ✅ Matches: <code>CC-1234</code>, <code>CC-5678</code>, <code>CC-9012</code> - ❌ Rejects: <code>CC123</code>, <code>CC-12345</code>, <code>cc-1234</code></p> <h3 id=resource-names>Resource Names</h3> <p>Prevent whitespace and special characters:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nt>Name</span><span class=p>:</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^[a-zA-Z0-9][a-zA-Z0-9-_]*[a-zA-Z0-9]$&quot;</span>
</code></pre></div> <p><strong>Examples:</strong> - ✅ Matches: <code>web-server-01</code>, <code>data-bucket</code>, <code>main-vpc</code> - ❌ Rejects: <code>web server</code>, <code>-web-server</code>, <code>api-gateway-</code></p> <h3 id=version-numbers>Version Numbers</h3> <p>Validate semantic versioning:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=nt>Version</span><span class=p>:</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^v?[0-9]+\\.[0-9]+\\.[0-9]+$&quot;</span>
</code></pre></div> <p><strong>Examples:</strong> - ✅ Matches: <code>1.0.0</code>, <code>v2.1.3</code>, <code>10.15.2</code> - ❌ Rejects: <code>1.0</code>, <code>v1</code>, <code>1.0.0-beta</code></p> <h3 id=ip-addresses>IP Addresses</h3> <p>Validate IPv4 addresses:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=nt>IPAddress</span><span class=p>:</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^([0-9]{1,3}\\.){3}[0-9]{1,3}$&quot;</span>
</code></pre></div> <p><strong>Examples:</strong> - ✅ <code>192.168.1.1</code>, <code>10.0.0.1</code>, <code>172.16.0.1</code> - ❌ <code>192.168.1</code>, <code>256.1.1.1</code>, <code>not-an-ip</code></p> <h3 id=aws-resource-arns>AWS Resource ARNs</h3> <p>Validate ARN format:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nt>SourceARN</span><span class=p>:</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^arn:aws:[a-zA-Z0-9-]+:[a-zA-Z0-9-]*:[0-9]{12}:.+$&quot;</span>
</code></pre></div> <p><strong>Examples:</strong> - ✅ <code>arn:aws:s3:::my-bucket</code>, <code>arn:aws:iam::123456789012:role/MyRole</code> - ❌ <code>arn:aws:s3</code>, <code>not-an-arn</code></p> <h2 id=advanced-pattern-techniques>Advanced Pattern Techniques</h2> <h3 id=case-insensitive-matching>Case-Insensitive Matching</h3> <p>Use the <code>--ignore-case</code> flag for case-insensitive tag name matching (patterns themselves remain case-sensitive):</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>terratags<span class=w> </span>-config<span class=w> </span>config.yaml<span class=w> </span>-dir<span class=w> </span>./terraform<span class=w> </span>--ignore-case
</code></pre></div> <h3 id=optional-components>Optional Components</h3> <p>Use <code>?</code> for optional parts:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=nt>Version</span><span class=p>:</span>
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^v?[0-9]+\\.[0-9]+\\.[0-9]+(-[a-zA-Z0-9]+)?$&quot;</span>
</code></pre></div> <p>Matches: <code>1.0.0</code>, <code>v1.0.0</code>, <code>1.0.0-beta</code>, <code>v2.1.3-alpha</code></p> <h3 id=character-classes>Character Classes</h3> <p>Use character classes for flexibility:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=nt>Name</span><span class=p>:</span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^[a-zA-Z][a-zA-Z0-9_-]{2,30}[a-zA-Z0-9]$&quot;</span>
</code></pre></div> <ul> <li>Must start with a letter</li> <li>Can contain letters, numbers, underscores, hyphens</li> <li>Must end with letter or number</li> <li>Length between 4-32 characters</li> </ul> <h3 id=alternation>Alternation</h3> <p>Use <code>|</code> for multiple valid formats:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=nt>Environment</span><span class=p>:</span>
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^(dev|development|test|testing|stage|staging|prod|production)$&quot;</span>
</code></pre></div> <h3 id=quantifiers>Quantifiers</h3> <p>Control repetition with quantifiers:</p> <ul> <li><code>*</code> - Zero or more</li> <li><code>+</code> - One or more </li> <li><code>?</code> - Zero or one</li> <li><code>{n}</code> - Exactly n times</li> <li><code>{n,}</code> - n or more times</li> <li><code>{n,m}</code> - Between n and m times</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=nt>Project</span><span class=p>:</span>
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^[A-Z]{2,4}-[0-9]{3,6}$&quot;</span><span class=w>  </span><span class=c1># 2-4 letters, 3-6 digits</span>
</code></pre></div> <h2 id=error-handling-and-debugging>Error Handling and Debugging</h2> <h3 id=understanding-error-messages>Understanding Error Messages</h3> <p>When validation fails, Terratags provides detailed error messages:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>Resource aws_instance &#39;web_server&#39; has tag pattern violations:
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>  - Tag &#39;Environment&#39;: value &#39;Production&#39; does not match required pattern &#39;^(dev|test|staging|prod)$&#39;
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>  - Tag &#39;Owner&#39;: value &#39;DevOps Team&#39; does not match required pattern &#39;^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$&#39;
</code></pre></div> <h3 id=common-pattern-errors>Common Pattern Errors</h3> <ol> <li><strong>Escaping Issues</strong>: Remember to escape backslashes in YAML (<code>\\</code> instead of <code>\</code>)</li> <li><strong>Anchoring</strong>: Use <code>^</code> and <code>$</code> to match the entire string</li> <li><strong>Case Sensitivity</strong>: Patterns are case-sensitive by default</li> <li><strong>Special Characters</strong>: Escape regex special characters when matching literally</li> </ol> <h3 id=testing-patterns>Testing Patterns</h3> <p>Test your patterns before deployment:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=c1># Test with passing examples</span>
<a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>terratags<span class=w> </span>-config<span class=w> </span>config.yaml<span class=w> </span>-dir<span class=w> </span>examples/pattern_validation_passing
<a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>
<a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=c1># Test with failing examples</span>
<a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>terratags<span class=w> </span>-config<span class=w> </span>config.yaml<span class=w> </span>-dir<span class=w> </span>examples/pattern_validation_failing
<a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a>
<a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=c1># Generate detailed report</span>
<a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>terratags<span class=w> </span>-config<span class=w> </span>config.yaml<span class=w> </span>-dir<span class=w> </span>examples/failing<span class=w> </span>-report<span class=w> </span>debug-report.html
</code></pre></div> <h2 id=best-practices>Best Practices</h2> <h3 id=1-start-simple>1. Start Simple</h3> <p>Begin with basic patterns and add complexity gradually:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1># Start with this</span>
<a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=nt>Environment</span><span class=p>:</span>
<a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^(dev|prod)$&quot;</span>
<a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>
<a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=c1># Expand as needed</span>
<a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=nt>Environment</span><span class=p>:</span>
<a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^(dev|development|test|testing|staging|prod|production)$&quot;</span>
</code></pre></div> <h3 id=2-use-meaningful-patterns>2. Use Meaningful Patterns</h3> <p>Make patterns reflect real business requirements:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=c1># Good: Reflects actual project structure</span>
<a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=nt>Project</span><span class=p>:</span>
<a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^[A-Z]{2,4}-[0-9]{3,6}$&quot;</span>
<a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>
<a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=c1># Bad: Too restrictive without business justification</span>
<a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=nt>Project</span><span class=p>:</span>
<a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^PROJECT-[0-9]{3}$&quot;</span>
</code></pre></div> <h3 id=3-document-your-patterns>3. Document Your Patterns</h3> <p>Add comments explaining pattern requirements:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=nt>required_tags</span><span class=p>:</span>
<a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=w>  </span><span class=c1># Project code format: 2-4 uppercase letters, dash, 3-6 digits</span>
<a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=w>  </span><span class=c1># Examples: WEB-123456, DATA-567890, INFRA-890123</span>
<a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=w>  </span><span class=nt>Project</span><span class=p>:</span>
<a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a><span class=w>    </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^[A-Z]{2,4}-[0-9]{3,6}$&quot;</span>
</code></pre></div> <h3 id=4-test-thoroughly>4. Test Thoroughly</h3> <p>Create test cases for both valid and invalid values:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=c1># Test cases in comments</span>
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=c1># Valid: user@company.com, team.lead@example.org</span>
<a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=c1># Invalid: username, user@domain, @company.com</span>
<a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=nt>Owner</span><span class=p>:</span>
<a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$&quot;</span>
</code></pre></div> <h3 id=5-consider-migration>5. Consider Migration</h3> <p>Plan migration from simple to pattern validation:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=c1># Phase 1: Simple validation</span>
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=nt>required_tags</span><span class=p>:</span>
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Environment</span>
<a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Owner</span>
<a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a>
<a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=c1># Phase 2: Add patterns gradually</span>
<a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=nt>required_tags</span><span class=p>:</span>
<a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a><span class=w>  </span><span class=nt>Environment</span><span class=p>:</span>
<a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a><span class=w>    </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^(dev|test|prod)$&quot;</span>
<a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a><span class=w>  </span><span class=nt>Owner</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span><span class=w>  </span><span class=c1># Still simple validation</span>
<a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a>
<a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a><span class=c1># Phase 3: Full pattern validation</span>
<a id=__codelineno-22-13 name=__codelineno-22-13 href=#__codelineno-22-13></a><span class=nt>required_tags</span><span class=p>:</span>
<a id=__codelineno-22-14 name=__codelineno-22-14 href=#__codelineno-22-14></a><span class=w>  </span><span class=nt>Environment</span><span class=p>:</span>
<a id=__codelineno-22-15 name=__codelineno-22-15 href=#__codelineno-22-15></a><span class=w>    </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^(dev|test|staging|prod)$&quot;</span>
<a id=__codelineno-22-16 name=__codelineno-22-16 href=#__codelineno-22-16></a><span class=w>  </span><span class=nt>Owner</span><span class=p>:</span>
<a id=__codelineno-22-17 name=__codelineno-22-17 href=#__codelineno-22-17></a><span class=w>    </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$&quot;</span>
</code></pre></div> <h2 id=performance-considerations>Performance Considerations</h2> <h3 id=pattern-complexity-impact>Pattern Complexity Impact</h3> <p>Pattern validation performance depends on regex complexity:</p> <ul> <li><strong>Simple patterns</strong> (literal strings, basic character classes): Fastest</li> <li><strong>Medium patterns</strong> (alternation, quantifiers): Good performance </li> <li><strong>Complex patterns</strong> (nested groups, lookaheads): May impact performance with large files</li> </ul> <h3 id=best-practices-for-performance>Best Practices for Performance</h3> <ol> <li><strong>Use Specific Patterns</strong>: Prefer <code>^(dev|test|prod)$</code> over <code>.*dev.*</code></li> <li><strong>Avoid Excessive Backtracking</strong>: Be careful with patterns like <code>(a+)+b</code></li> <li><strong>Test at Scale</strong>: Validate performance with large Terraform configurations</li> <li><strong>Profile When Needed</strong>: Use verbose mode to identify slow validations</li> </ol> <h3 id=optimization-tips>Optimization Tips</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=c1># Good: Specific and efficient</span>
<a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=nt>Environment</span><span class=p>:</span>
<a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;^(dev|test|staging|prod)$&quot;</span>
<a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a>
<a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=c1># Avoid: Overly broad and potentially slow</span>
<a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a><span class=nt>Environment</span><span class=p>:</span>
<a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=w>  </span><span class=nt>pattern</span><span class=p>:</span><span class=w> </span><span class=s>&quot;.*&quot;</span>
</code></pre></div> <h2 id=integration-examples>Integration Examples</h2> <h3 id=cicd-pipeline>CI/CD Pipeline</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=c1># GitHub Actions example</span>
<a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Validate Tags</span>
<a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=w>  </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
<a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=w>    </span><span class=no>terratags -config .terratags.yaml -dir ./terraform</span>
<a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=w>    </span><span class=no>if [ $? -ne 0 ]; then</span>
<a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a><span class=w>      </span><span class=no>echo &quot;Tag validation failed. Please fix tag patterns.&quot;</span>
<a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=w>      </span><span class=no>exit 1</span>
<a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a><span class=w>    </span><span class=no>fi</span>
</code></pre></div> <h3 id=pre-commit-hook>Pre-commit Hook</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=c1># .pre-commit-config.yaml</span>
<a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=nt>repos</span><span class=p>:</span>
<a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/terratags/terratags</span>
<a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v0.3.0</span>
<a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span>
<a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">terratags</span>
<a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a><span class=w>        </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>--config=.terratags.yaml</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>--remediate</span><span class="p p-Indicator">]</span>
</code></pre></div> <h3 id=terraform-plan-integration>Terraform Plan Integration</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=c1># Validate against Terraform plan</span>
<a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>terraform<span class=w> </span>plan<span class=w> </span>-out<span class=o>=</span>tfplan
<a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>terraform<span class=w> </span>show<span class=w> </span>-json<span class=w> </span>tfplan<span class=w> </span>&gt;<span class=w> </span>plan.json
<a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a>terratags<span class=w> </span>-config<span class=w> </span>config.yaml<span class=w> </span>-plan<span class=w> </span>plan.json
</code></pre></div> <h3 id=gitlab-ci-integration>GitLab CI Integration</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=c1># .gitlab-ci.yml</span>
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=nt>validate-tags</span><span class=p>:</span>
<a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">validate</span>
<a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=w>  </span><span class=nt>script</span><span class=p>:</span>
<a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">terratags -config .terratags.yaml -dir ./terraform</span>
<a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=w>  </span><span class=nt>rules</span><span class=p>:</span>
<a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>changes</span><span class=p>:</span>
<a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;**/*.tf&quot;</span>
</code></pre></div> <h3 id=jenkins-pipeline-integration>Jenkins Pipeline Integration</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=n>pipeline</span><span class=w> </span><span class=o>{</span>
<a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=w>    </span><span class=n>agent</span><span class=w> </span><span class=n>any</span>
<a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=w>    </span><span class=n>stages</span><span class=w> </span><span class=o>{</span>
<a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=w>        </span><span class=n>stage</span><span class=o>(</span><span class=s1>&#39;Validate Tags&#39;</span><span class=o>)</span><span class=w> </span><span class=o>{</span>
<a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=w>            </span><span class=n>steps</span><span class=w> </span><span class=o>{</span>
<a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a><span class=w>                </span><span class=n>sh</span><span class=w> </span><span class=s1>&#39;terratags -config config.yaml -dir ./terraform&#39;</span>
<a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=w>            </span><span class=o>}</span>
<a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=w>        </span><span class=o>}</span>
<a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a><span class=o>}</span>
</code></pre></div> <h2 id=troubleshooting>Troubleshooting</h2> <h3 id=pattern-not-matching>Pattern Not Matching</h3> <ol> <li><strong>Check Escaping</strong>: Ensure backslashes are properly escaped in YAML</li> <li><strong>Verify Anchors</strong>: Use <code>^</code> and <code>$</code> to match entire string</li> <li><strong>Test Online</strong>: Use regex testing tools to validate patterns</li> <li><strong>Check Case</strong>: Patterns are case-sensitive by default</li> </ol> <h3 id=performance-considerations_1>Performance Considerations</h3> <ol> <li><strong>Simple Patterns</strong>: Use simple patterns when possible</li> <li><strong>Avoid Backtracking</strong>: Be careful with complex nested patterns</li> <li><strong>Test at Scale</strong>: Validate performance with large Terraform files</li> </ol> <h3 id=common-regex-gotchas>Common Regex Gotchas</h3> <ol> <li><strong>Greedy Matching</strong>: <code>.*</code> matches as much as possible</li> <li><strong>Escaping Dots</strong>: Use <code>\\.</code> to match literal dots</li> <li><strong>Word Boundaries</strong>: Use <code>\\b</code> for word boundaries in YAML</li> <li><strong>Unicode</strong>: Go regex supports Unicode by default</li> </ol> <h2 id=reference>Reference</h2> <h3 id=regex-quick-reference>Regex Quick Reference</h3> <table> <thead> <tr> <th>Pattern</th> <th>Description</th> <th>Example</th> </tr> </thead> <tbody> <tr> <td><code>^</code></td> <td>Start of string</td> <td><code>^dev</code></td> </tr> <tr> <td><code>$</code></td> <td>End of string</td> <td><code>prod$</code></td> </tr> <tr> <td><code>.</code></td> <td>Any character</td> <td><code>a.c</code> matches <code>abc</code></td> </tr> <tr> <td><code>*</code></td> <td>Zero or more</td> <td><code>ab*</code> matches <code>a</code>, <code>ab</code>, <code>abb</code></td> </tr> <tr> <td><code>+</code></td> <td>One or more</td> <td><code>ab+</code> matches <code>ab</code>, <code>abb</code></td> </tr> <tr> <td><code>?</code></td> <td>Zero or one</td> <td><code>ab?</code> matches <code>a</code>, <code>ab</code></td> </tr> <tr> <td><code>{n}</code></td> <td>Exactly n</td> <td><code>a{3}</code> matches <code>aaa</code></td> </tr> <tr> <td><code>{n,m}</code></td> <td>Between n and m</td> <td><code>a{2,4}</code> matches <code>aa</code>, <code>aaa</code>, <code>aaaa</code></td> </tr> <tr> <td><code>[abc]</code></td> <td>Character class</td> <td><code>[abc]</code> matches <code>a</code>, <code>b</code>, or <code>c</code></td> </tr> <tr> <td><code>[a-z]</code></td> <td>Character range</td> <td><code>[a-z]</code> matches any lowercase letter</td> </tr> <tr> <td><code>[^abc]</code></td> <td>Negated class</td> <td><code>[^abc]</code> matches anything except <code>a</code>, <code>b</code>, <code>c</code></td> </tr> <tr> <td><code>\|</code></td> <td>Alternation</td> <td><code>cat\|dog</code> matches <code>cat</code> or <code>dog</code></td> </tr> <tr> <td><code>()</code></td> <td>Grouping</td> <td><code>(ab)+</code> matches <code>ab</code>, <code>abab</code></td> </tr> <tr> <td><code>\\</code></td> <td>Escape character</td> <td><code>\\.</code> matches literal dot</td> </tr> </tbody> </table> <h3 id=go-regex-documentation>Go Regex Documentation</h3> <p>For complete regex syntax, see the <a href=https://golang.org/pkg/regexp/syntax/ >Go regexp documentation</a>.</p> <h3 id=testing-tools>Testing Tools</h3> <ul> <li><a href=https://regex101.com/ >Regex101</a> - Online regex tester</li> <li><a href=https://regexr.com/ >RegExr</a> - Interactive regex learning tool</li> <li><a href=https://www.regexpal.com/ >RegexPal</a> - Simple regex tester</li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> </div> <div class=md-social> <a href=https://github.com/terratags/terratags target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.indexes", "navigation.top", "search.highlight", "search.share", "content.code.copy"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.f55a23d4.min.js></script> </body> </html>